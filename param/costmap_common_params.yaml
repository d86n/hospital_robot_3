# --- CẤU HÌNH ROBOT ---
# Robot bạn rộng ~0.5m (bán kính 0.25m).
# Để radius 0.3m là an toàn (dư 5cm mỗi bên).
robot_radius: 0.3

# --- CẤU HÌNH CHUNG ---
map_type: costmap

# THAM SỐ QUAN TRỌNG TỪ HƯỚNG DẪN:
# Cho phép độ trễ của TF. Trong Gazebo nên để cao chút (0.5s) để tránh lỗi warning liên tục.
transform_tolerance: 0.5 

# --- CẤU HÌNH CHƯỚNG NGẠI VẬT ---
obstacle_layer:
  enabled: true
  obstacle_range: 2.5
  raytrace_range: 3.0
  inflation_radius: 0.25
  track_unknown_space: true
  
  observation_sources: laser_scan_sensor
  
  laser_scan_sensor: {
    sensor_frame: lidar_link,
    data_type: LaserScan,
    topic: /scan,
    marking: true,
    clearing: true,
    # THÊM MỚI THEO HƯỚNG DẪN:
    # Lidar 20Hz (0.05s), ta cho phép trễ tối đa 0.4s (gấp đôi hoặc hơn tolerance)
    expected_update_rate: 0.4, 
    # Cần thêm inf_is_valid = true để lidar không bị lỗi khi gặp khoảng cách vô cực
    inf_is_valid: true 
  }

# --- CẤU HÌNH VÙNG AN TOÀN ---
inflation_layer:
  enabled: true
  cost_scaling_factor: 5.0
  inflation_radius: 0.55